<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <report
            id="price_list_isometric"
            model="product.template"
            string="Pricelist"
            report_type="qweb-pdf"
            name="report_price_list.report_price_list_isometric"
            file="report_price_list.report_price_list_isometric"
        />

        <record id="report_price_list.price_list_isometric" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="report_price_list.paperformat_price_list" />
        </record>

        <template id="report_price_list_isometric_header">
            <table width="100%" style="border-bottom: 3px solid black;">
                <tbody>
                    <tr>
                        <td width="35%" style="font-size: 28pt;">
                            <span t-field="line.name"/>
                        </td>
                        <td width="60%" style="font-size: 28pt;">
                            PRICELIST
                        </td>
                        <td width="15%" align="right" valign="bottom" style="font-size: 12p;">
                            <t t-if="langu == 'es_MX'">
                                <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/>
                            </t>
                            <t t-if="langu != 'es_MX'">
                                <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%m/%d/%Y')"/>
                            </t>
                        </td>
                    </tr>
                </tbody>
            </table>
        </template>

        <template id="report_price_list_isometric_footer">
            <table width="100%">
                <tbody>
                    <tr>
                        <td width="45%" style="font-size: 9pt;">
                            Terms and conditions:<br/>
                            *Prices are subject to authorized discounts<br/>
                            *Prices subject to change<br/>
                            *Nominal dimensions shown
                        </td>
                        <td width="10%" align="center" valign="bottom" style="font-size: 8pt;">
                            <span t-esc="pag_n"/>
                        </td>
                        <td width="45%" align="right">
                            <img t-att-src="'data:image/png;base64,%s' % logo" style="max-height: 30px;"/><br/>.com
                        </td>
                    </tr>
                </tbody>
            </table>
        </template>

        <template id="report_price_list_isometric_document">
            <t t-set="pag_n" t-value="pag_n+1"/>
            <t t-foreach="docs[line.name]" t-as="doc" style="font-family: Century Gothic;">
                <div class="header">
                    <t t-call="report_price_list.report_price_list_isometric_header"/>
                </div>
                <div class="page">
                    <table width="100%" style="border-collapse:collapse;">
                        <thead>
                            <tr style="font-size: 11.5pt;" height="60px" >
                                <th width="30%" align="center"><strong>DESCRIPTION</strong></th>
                                <th width="19%" align="center"><strong>CODE</strong></th>
                                <th width="15%" align="center"><strong>PRICE</strong></th>
                                <th width="20%" align="center"><strong>DIMENSIONS <br/> W x D x H</strong></th>
                                <th width="8%" align="center"><strong>LB.</strong></th>
                                <th width="8%" align="center"><strong>Cu. Ft.</strong></th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="len(doc)" t-as="n">
                                <tr height="30px">
                                    <td colspan="7" style="font-size: 10.5pt;">
                                        <strong>
                                            <span t-field="doc[n].name"/>
                                        </strong>
                                    </td>
                                </tr>
                                <tr height="130px" style="font-size: 9.5pt; border-bottom: 1px solid black;">
                                    <td width="30%">
                                        <img t-att-src="'data:image/png;base64,%s' % doc[n].isometric" style="max-height: 125px;"/>
                                    </td>
                                    <td width="19%" align="center">
                                        <span t-field="doc[n].reference_mask"/>
                                    </td>
                                    <td width="15%" align="center">
                                        <span t-field="doc[n].list_price" t-field-options='{"widget": "monetary", "display_currency": "doc[n].currency_id"}'/>
                                    </td>
                                    <td width="20%" align="center">
                                        <span t-field="doc[n].length"/> x <span t-field="doc[n].width"/> x <span t-field="doc[n].height"/>
                                    </td>
                                    <td width="8%" align="center">
                                        <span t-field="doc[n].weight"/>
                                    </td>
                                    <td width="8%" align="center">
                                        <span t-field="doc[n].volume"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
                <div class="footer">
                    <t t-call="report_price_list.report_price_list_isometric_footer"/>
                    <t t-set="pag_n" t-value="pag_n+1"/>
                </div>
            </t>
            <t t-call="report_price_list.report_price_list_isometric_finished"/>
        </template>

        <template id="report_price_list_isometric_finished">
            <div class="header">
                <t t-call="report_price_list.report_price_list_isometric_header"/>
            </div>
            <div class="page">
                <table width="100%">
                    <tbody>
                        <tr height="460px">
                            <td valign="top">
                                <span t-field="line.acabados_html"/>
                            </td>
                        </tr>
                        <tr height="130px">
                            <td valign="top">
                                <span t-field="line.notas_html"/>
                            </td>
                        </tr>
                        <tr height="150px">
                            <td valign="top">
                                <span t-field="line.composiciones_html"/>
                            </td>
                        </tr>
                        <tr height="120px">
                            <td>
                                <img src='http://127.0.0.1:8069/report_price_list/static/src/img/formato.jpg' style="max-width:100%;"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="footer">
                <t t-call="report_price_list.report_price_list_isometric_footer"/>
                <t t-set="pag_n" t-value="pag_n+1"/>
            </div>
        </template>

        <template id="report_price_list_isometric">
            <t t-call="report.html_container">
                <t t-foreach="lines_id" t-as="line">
                    <t t-set="pag_n" t-value="0"/>
                    <t t-call="report_price_list.report_price_list_isometric_document"/>
                </t>
            </t>
        </template>
    </data>
</openerp>